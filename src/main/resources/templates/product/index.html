<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- th:fragment     -->
    <th:block th:insert="fragments/head :: headOutterLink" />

    <style>
        /* ========================================================================== */
        /* wepper_section */
        /* ========================================================================== */
        #wepper_section {
            width: 100%;
        }

        .main-section {}

        .main-section-area {
            width: 1260px;
            margin: 0 auto;
        }

        .top-area {
            height: 127px;
            margin-top: 30px;

            /* border: 1px solid #E0E0E0; */
        }

        .swiper {
            width: 1260px;
            height: 132px;
        }

        .swiper-slide {
            height: 110px;
            border: 1px solid #E0E0E0;
        }

        .main-area {
            height: 1586px;
            display: flex;
        }

        .product-area {
            width: 845px;
        }

        .search-area {
            /* height: 300px; */
            margin-top: 12px;

            /* border: 1px solid #E0E0E0; */
        }

        /* ========================================================================== */
        /* 상품 검색 바 */
        /* ========================================================================== */
        .product-search-bar {
            height: 41px;
            display: flex;
            position: relative;

            border: 2px solid #E53B38;
        }

        .search-product-input {
            width: calc(100% - 40px);
            padding: 0 15px;
            font-family: "Malgun Gothic", Dotum, "돋움", "Apple SD Gothic Neo", Helvetica, Sans-serif;
            font-size: 13px;
            letter-spacing: -0.2px;
            box-sizing: border-box;
        }

        .search-product-submit {
            width: 40px;
            height: 41px;
            background-color: #E53B38;
            vertical-align: top;
            cursor: pointer;
        }

        /* ========================================================================== */
        /* 상품 검색 옵션 */
        /* ========================================================================== */
        .product-search-option-box {
            position: relative;
            min-height: 253px;
            margin-top: 12px;
            border: 1px solid #C4C4C4;
            box-sizing: border-box;
        }

        .search-option-top {
            height: 43px;
            line-height: 43px;
            padding: 0 15px;
            background: #F8F8F8;
            border-bottom: 1px solid #E0E0E0;
            font-size: 15px;
            letter-spacing: -0.6px;
            color: #0f0f0f;
            font-weight: bold;
        }

        .search-option-list {
            color: #0f0f0f;
            font-weight: bold;
            padding: 9px 0;
        }

        .search-option-lines {
            position: relative;
            padding: 0 17px;
        }


        /* ========================================================================== */
        /* 상품 목록 */
        /* ========================================================================== */
        .list-area {
            height: 1286px;
            margin-top: 12px;
            overflow: scroll;
            overflow-x: hidden;

            border: 1px solid #E0E0E0;

        }

        /* ========================================================================== */
        /* 상품 목록 틀 */
        /* ========================================================================== */
        .product-item {
            border-bottom: 1px solid #E0E0E0;
            display: flex;
        }

        /* 상품 이미지 */
        .product-image {
            position: relative;

        }

        /* 상품 이미지 */
        .product-img {
            vertical-align: middle;
            padding: 15px 21px 15px 26px;
            width: 80px;
            height: 80px;
        }

        .product-item-center {
            padding: 15px 0px 15px 0px;
            width: 545px;
        }

        .product-item-title {
            display: flex;
        }

        .product-item-title a {
            text-decoration: none;
        }

        /* 상품 코드 넘버 */
        .product-item-code-num {
            padding-right: 5px;
            /* padding-left: 5px; */
            line-height: 25px;
            color: #919191;
            font-weight: bold;
            font-size: 20px;
            text-align: center;

        }

        /* 상품 제목 */
        .product-item-name {
            padding-right: 5px;
            line-height: 28px;
            font-size: 15px;
            letter-spacing: -0.6px;
            font-weight: bold;
            color: #333;
        }

        /* 상품 내용 */
        .product-item-info {
            padding-left: 5px;
            max-width: 540px;
            font-size: 12px;
            color: #777;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .product-item-right {
            padding: 15px 0px 15px 0px;
            width: 155px;
            position: relative;
        }

        /* 상품 가격표 */
        .product-item-price {
            position: absolute;
            top: 26px;
            right: 15px;
            padding-right: 5px;
            font-size: 20px;
            letter-spacing: 0;
            font-weight: bold;
        }

        /* 상품 테그 */
        .product-item-tag {
            padding-left: 5px;
            padding-top: 13px;
        }

        /* 상품 등록 날짜 */
        .product-item-ptime {
            position: absolute;
            top: 2px;
            right: 5px;

            font-size: 13px;
            letter-spacing: -0.6px;
            font-weight: bold;
            color: #919191;
        }

        /* 장바구니 담기 버튼 */
        .product-itme-into-cart {
            position: absolute;
            top: 68px;
            right: 23px;
            cursor: pointer;
        }

        /* 장바구니 제거 버튼 */
        .product-itme-out-cart {
            position: absolute;
            top: 68px;
            right: 23px;
            cursor: pointer;
            background-color: #E53B38;
        }

        /* 상품 키워드 설명 */
        .product-tooltip-icon {
            position: relative;
            display: inline-block;
        }

        .product-tooltip {

            visibility: hidden;

            display: inline-block;
            min-width: 320px;
            max-width: 350px;
            max-height: 450px;
            overflow: auto;
            overflow-x: hidden;

            background-color: #FFFF99;
            border: 1px solid black;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            top: 100%;
            left: -25%;
            opacity: 0;
            transition: opacity 0.2s;

        }

        .tooltip-tep {}

        .tooltip-key {
            font-size: 12px;
            color: #FFA500;
        }

        .tooltip-text {
            font-size: 11px;
            color: #C0C0C0;
        }

        /* ========================================================================== */
        /* 장바구니 */
        /* ========================================================================== */
        .cart-area {
            height: 1586px;
            width: 403px;

            margin-left: 12px;
            margin-top: 12px;

            position: relative;

            /* border: 1px solid #E0E0E0; */
        }

        .cart-box {
            border: 1px solid #C4C4C4;
            position: sticky;
            top: 10px;
        }

        .product-cart {

            width: 393px;
            height: 595px;

            border: 4px solid #F8F8F8;
        }

        .cart-option {
            overflow: auto;
            height: 412px;

            background-color: #F8F8F8;

        }

        .cart-items {
            margin-top: 12px;
        }

        .cart-option > div:nth-last-child(1) {
            margin-bottom: 12px;
        }

        .cart-option div>a {
            text-decoration: none;
        }

        .cart-benner {
            width: 393px;
            height: 51px;

            display: flex;
            justify-content: center;
            align-items: center;

            font-size: 20px;
            color: black;
            background-color: #F8F8F8;
        }

        .cart-item-type {
            display: block;
            position: relative;
            padding: 0 10px;
            height: 38px;
            line-height: 38px;
            font-weight: bold;
            color: #333;
            font-size: 14px;
            letter-spacing: -0.4px;
            background-color: white;
        }

        .cart-prod-list {}

        .cart-buy-option {
            position: relative;
            height: 132px;

            border: 1px solid #E0E0E0;
        }
        .cart-price-sum {
            position: absolute;
            font-weight: bold;
            color: #333;
            font-size: 22px;
            top: 15px;
            left: 15px;
        }
        .cart-buy-product{
            position: absolute;
            top: 80px;
            left: 21px;
            color: white;
            width: 350px;
            height: 40px;
            background-color: #E53B38;

        }




        /* ========================================================================== */
        /* 장바구니 상품 목록 */
        /* ========================================================================== */
        /* 장바구니 상품 */
        .cart-item {
            position: relative;
            border-top: 1px solid #E0E0E0;
            border-bottom: 1px solid #E0E0E0;
            height: 65px;
            display: flex;
            padding: 10px;

        }
        /* 장바구니 상품 왼족 */
        .cart-item-left {}

        /* 장바구니 상품 이미지 */
        .cart-img {
            width: 60px;
            height: 60px;
        }

        /* 장바구니 상품 내용 */
        .cart-item-content {
            position: relative;
            width: 100%;
        }
        /* 장바구니 상품 타이틀 */
        .cart-item-title {
            display: flex;
            position: relative;
        }
        /* 장바구니 번호 */
        .cart-item-code-num {
            margin-left: 5px;
            color: #919191;
            font-weight: bold;
            font-size: 20px;
        }
        /* 장바구니 상품 이름 */
        .cart-item-name {
            margin-left: 5px;
            margin-top: 5px;
            font-weight: bold;
            color: #333;
            font-size: 15px;
        }
        /* 장바구니 상품 가격 */
        .cart-item-price {
            position: absolute;
            bottom: 5px;
            left: 10px;
            font-weight: bold;
            color: #333;
            font-size: 20px;
        }
        /* 장바구니 제거 버튼 */
        .cart-itme-out {
            position: absolute;
            width: 45px;
            height: 25px;
            right: 5px;
            top: 5px;
            cursor: pointer;
            background-color: #E53B38;
        }
        /* 장바구니 상품 수량 표시 */
        .cart-quantity {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 55px;
            right: 10px;
            bottom: 3px;
            position: absolute;
        }

        /* 장바구니 상품 수량 증가 버튼*/
        .cart-quantity-up {
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;

        }
        /* 장바구니 상품 수량 */
        .cart-quantity_count {
            font-weight: bold;
            color: #333;
            font-size: 20px;

        }
        /* 장바구니 상품 감소 버튼 */
        .cart-quantity-down {
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;

        }

        /* ========================================================================== */
        /* 스와이퍼 설정 */
        /* ========================================================================== */
        /* 스와이퍼 이미지 */
        .swiper-img {

            width: 255px;
            height: 119px;

        }
    </style>

</head>

<body>
<!-- 바디  -->
<div id="wepper">
    <!-- 바디 헤더 -->
    <!--  header fragment      -->
    <div th:replace="fragments/header_v1 :: headerFragment_menubar" />

    <!-- 바디 메인 섹션 -->
    <div id="wepper_section">
        <!-- 바디 메인 -->
        <div class="main-section">
            <!-- 바디 메인 -->
            <div class="main-section-area">
                <!-- 바디 메인 최상단 -->
                <div class="top-area">
                    <!-- Slider main container -->
                    <div class="swiper">
                        <!-- Additional required wrapper -->
                        <div class="swiper-wrapper">
                            <!-- Slides -->

                        </div>
                        <!-- If we need pagination -->
                        <!-- <div class="swiper-pagination"></div> -->

                        <!-- If we need scrollbar -->
                        <div class="swiper-scrollbar"></div>

                    </div>
                </div>
                <!-- 바디 메인 중단 -->
                <div class="main-area">
                    <!-- 상품 서비스 -->
                    <div class="product-area">
                        <!-- 상품 검색 서비스 -->
                        <div class="search-area">
                            <!-- 상품 검색바 -->
                            <div class="product-search-bar">

                                <input type="text" class="search-product-input" onkeydown="startSubmit(event)"
                                       placeholder="상품명을 입력해주세요">
                                <button class="material-symbols-outlined search-product-submit"
                                        type="button">search</button>

                            </div>
                            <!-- ======================================================================================= -->
                            <!-- 상품 검색 옵션 -->
                            <div class="product-search-option-box">
                                <!-- 상품 검색 옵션 최상단 -->
                                <!-- <div class="search-option-top">
                        CPU
                    </div> -->
                                <!-- 상품 검색 옵션 목록 -->
                                <!-- <div class="search-option-list">

                    </div> -->

                            </div>
                            <!-- ======================================================================================== -->
                        </div>
                        <!-- 상품 목록 -->
                        <div class="list-area">


                        </div>


                    </div>

                    <!-- 상품 장바구니 -->
                    <div class="cart-area">
                        <!-- 장바구니  -->
                        <div class="cart-box">
                            <!-- 장바구니  -->
                            <div class="product-cart">
                                <!-- 장바구니 최상단 -->
                                <div class="cart-benner">장바구니</div>
                                <!-- 장바구니 선택목록 -->
                                <div class="cart-option">

                                    <div class="cart-items">
                                        <a class="cart-item-type citem-cpu" href="#"
                                           onclick="event.preventDefault();">CPU</a>
                                        <div class="cart-prod-list cprod-cpu"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-motherboard" href="#"
                                           onclick="event.preventDefault();">메인보드</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-memory" href="#"
                                           onclick="event.preventDefault();">메모리</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-gpu" href="#"
                                           onclick="event.preventDefault();">그레픽카드</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-ssd" href="#"
                                           onclick="event.preventDefault();">SSD</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-hdd" href="#"
                                           onclick="event.preventDefault();">HDD</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-case" href="#"
                                           onclick="event.preventDefault();">케이스</a>
                                        <div class="cart-prod-list"></div>
                                    </div>
                                    <div class="cart-items">
                                        <a class="cart-item-type citem-power" href="#"
                                           onclick="event.preventDefault();">파워</a>
                                        <div class="cart-prod-list"></div>
                                    </div>

                                </div>
                                <!-- 장바구니 하단 구매 옵션 -->
                                <div class="cart-buy-option">

                                    <div class="cart-price-sum">합계 : 0원</div>
                                    <button type="button" class="btn btn-danger cart-buy-product" href="#">구매하기</button>

                                </div>

                            </div>
                        </div>


                    </div>
                </div>


            </div>

        </div>

    </div>

    <div id="wepper_footer">

    </div>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"
        integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script th:inline="javascript">


    //============================================================
    //장바구니 찾기
    const citem_type_all_El = document.querySelectorAll('.cart-item-type');
    //상품 검색 옵션 박스 찾기
    const product_search_option_box_el = document.querySelector('.product-search-option-box');
    //상품 목록 생성 위치
    const list_area_El = document.querySelector('.list-area');
    //유저 식별
    const username = /*[[${#authentication.name}]]*/ {};
    //============================================================
    let listProdType = '';          //리스트를 불러올 상품의 타입 저장 변수
    let listPordtagsFliter = [];    //상품 리스트를 불러올때 필터링할 테그 저장 변수
    let listProdSearchWord = '';    //상품 리스트를 검색할 단어 정 변수
    //============================================================

    //스와이퍼 컨텐츠=============================================
    const swiperitem = [0,
        //이미지 ,              링크
        "/img/game_img_1.jpg", "#",
        "/img/game_img_2.jpg", "#",
        "/img/game_img_3.jpg", "#",
        "/img/game_img_4.jpg", "#",
        "/img/game_img_5.jpg", "#",
        "/img/game_img_1.jpg", "#",
        "/img/game_img_2.jpg", "#",
        "/img/game_img_3.jpg", "#",
        "/img/game_img_4.jpg", "#",
        "/img/game_img_5.jpg", "#",
        "/img/game_img_1.jpg", "#",
        "/img/game_img_2.jpg", "#"

    ];
    //============================================================

    //검색 테그 ==========================================================
    //타입별 생성 테그 입력 ('%n' 은 줄변경)

    //cpu 테그
    const tag_cpu = [

        //제조사
        'AMD', 'intel', '%n',
        //제조사2
        '라이젠', '인텔', '%n',
        //세대
        '3세대', '4세대', '5세대', '6세대', '7세대', '8세대', '9세대', '10세대', '11세대', '12세대', '13세대', '14세대', '%n',
        //소켓
        '인텔(소켓1700)', '인텔(소켓1200)', 'AMD(소켓AM5)', 'AMD(소켓AM4)', '%n',
        //제조 공정
        '5nm', '7mm', '10mm', '12mm', '14mm', '%n',
        //코어 수
        '2코어', '4코어', '6코어', '8코어', '10코어', '12코어', '%n',
        //쓰레드 수
        '2쓰레드', '4쓰레드', '6쓰레드', '8쓰레드', '10쓰레드', '12쓰레드'

    ];
    //메인보드 테그
    const tag_motherboard = [

        //제조사
        'MSI', 'ASUS', 'ASRock', 'GIGABYTE', 'ECS', '%n',
        //제품 분류
        '인텔 CPU용', 'AMD CPU용', '임베디드', '주변기기', '%n',
        //cpu 소켓
        '인텔(소켓1700)', '인텔(소켓1200)', 'AMD(소켓AM5)', 'AMD(소켓AM4)', 'AMD(소켓sTRX4)', '%n',
        //세부 칩셋
        '인텔 B760', '인텔 B660', '인텔 H610', 'AMD B650', 'AMD A620', '%n',
        //폼펙터
        'ATX (30.5x24.4cm)', 'M-ATX (24.4x24.4c', 'M-iTX (17.0x17.0c', 'E-ATX (30.5x33.0c', 'EEB (30.5x33.0cm)', '%n',
        //전원부
        '28페이즈', '27페이즈', '25페이즈', '24페이즈', '23페이즈', '%n',
        //Vcore출력합계
        '2501~ A', '2001~2500 A', '1501~2000 A', '1001~1500 A', '501~1000 A'

    ];
    //메모리 테그
    const tag_memory = [

        '삼성전자', '마이크론', 'G.SKILL', 'TeamGroup', '이메이션', '%n',
        '데스크탑용', '노트북용', '서버용', '%n',
        'DDR5', 'DDR4', 'DDR3', 'DDR2', 'DDR', '%n',
        '64GB', '32GB', '16GB', '8GB', '4GB', '2GB', '1GB', '512MB', '256MB'

    ];
    //그레픽카드 테그
    const tag_gpu = [

        '테스트', '테스트', '테스트'

    ];
    //SSE 테그
    const tag_ssd = [

        '테스트', '테스트', '테스트'

    ];
    //HDD 테그
    const tag_hdd = [

        '테스트', '테스트', '테스트'

    ];
    //본체 테그
    const tag_case = [

        '테스트', '테스트', '테스트'

    ];
    //파워 테그
    const tag_power = [

        '테스트', '테스트', '테스트'

    ];

    //================================================

    //====================================================================
    //테그 생성기
    //====================================================================
    const genTags = (tag, optionEl) => {

        for (let i = 0; i < tag.length; i++) {

            if (tag[i] === '%n') { //%n 이 입력될시 줄변경

                var br_El = document.createElement('br');
                optionEl.appendChild(br_El);

            } else {

                var option_label_El = document.createElement('label')
                option_label_El.className = 'tag-labels'
                // option_label_El.textContent = tag[i];

                var textNode_El = document.createTextNode(tag[i]);

                var option_El = document.createElement('input')
                option_El.setAttribute('type', 'checkbox');
                option_El.setAttribute('class', 'prodtags-checkbox');
                option_El.setAttribute('name', 'prodtags');
                option_El.setAttribute('value', tag[i]);


                option_label_El.appendChild(option_El);
                option_label_El.appendChild(textNode_El);
                optionEl.appendChild(option_label_El);

            }



        }
    }

    //============================================================
    //메인페이지 로드시 실행한 디폴트 설정들
    //============================================================
    const initfunc = () => {

        //카트 디폴트 설정=================================================
        const cpu_item_defalut_El = document.querySelector('.citem-cpu');
        const cpu_prod_defalut_El = document.querySelector('.cprod-cpu');

        cpu_item_defalut_El.style.backgroundColor = '#E53B38';
        cpu_item_defalut_El.style.color = 'white';
        cpu_prod_defalut_El.style.border = '1px solid #E53B38';

        var cpu_El = document.createElement('div');
        cpu_El.className = 'search-option-top';
        cpu_El.textContent = 'CPU';

        var cpu_option_El = document.createElement('div');
        cpu_option_El.className = 'search-option-list';

        genTags(tag_cpu, cpu_option_El);

        product_search_option_box_el.appendChild(cpu_El);
        product_search_option_box_el.appendChild(cpu_option_El);

        //리스트를 불러올 상품타입 변경
        listProdType = 'cpu';

        //체크박스 이벤트 리스너 등록
        setSearchFilterListener();
        //=================================================================

        //스와이퍼 등록
        setSwiperContent();

        //검색 옵션 검색어 리스너 등록
        setSearchSubmitListener();

        //상품 리스트 불러오기
        getProdList();

    }

    //============================================================
    //상품 리스트 불러오기
    //============================================================
    const getProdList = () => {

        //서버 전송용으로 문자열로 변환
        let lptfliterToQueryString = listPordtagsFliter.join(',');

        axios.get('/product/list', { params: { prodtype: listProdType, prodname: listProdSearchWord, prodtags: lptfliterToQueryString } })
            .then(response => {
                console.log(response);

                if (response != null) {
                    const productData = response.data;

                    //기존 목록 제거
                    const list_area_El = document.querySelector('.list-area');
                    list_area_El.innerHTML = '';

                    productData.forEach(data => { CreateProductList(data) });

                    //툴팁 적용
                    setTooltips();
                    //카트 '담기' 버튼 활성화
                    intocart();
                    // 장바구니 호출
                    listcart();

                }


            })
            .catch(error => console.log(error));

    }

    //============================================================
    //상품 목록 생성
    //============================================================
    const CreateProductList = (data) => {

        //상품 아이템
        var product_item_El = document.createElement('div');
        product_item_El.className = "product-item";

        //상품 아이템 왼쪽
        var product_item_left_El = document.createElement('div')
        product_item_left_El.className = "product-item-left";

        //상품이미지
        var product_img_El = document.createElement('img')
        product_img_El.className = "product-img";
        product_img_El.src = data.prodimagepaths[0];


        //상품 아이템 중앙
        var product_item_center_El = document.createElement('div')
        product_item_center_El.className = "product-item-center";

        //상품 아이템 타이틀 틀
        var product_item_title_El = document.createElement('div')
        product_item_title_El.className = "product-item-title";

        //상품 아이템 번호
        var product_item_code_num_El = document.createElement('div')
        product_item_code_num_El.className = "product-item-code-num";
        product_item_code_num_El.textContent = data.prodcode;

        //상품 아이템 제목
        var product_item_name_El = document.createElement('a')
        product_item_name_El.className = "product-item-name";
        product_item_name_El.textContent = data.prodname;
        product_item_name_El.href = "/product/get/" + data.prodcode;

        //키워드 툴팁 표시
        var product_tooltip_icon_El = document.createElement('div')
        product_tooltip_icon_El.className = "product-tooltip-icon"


        //====================================================================
        //키워드 툴팁 생성기
        //====================================================================
        console.log("data.prodkeywords = " + data.prodkeywords + typeof data.prodkeywords)
        if (data.prodkeywords.length > 0) {
            var product_tooltip_El = document.createElement('div')
            product_tooltip_El.className = "product-tooltip";



            //툴팁에 키워드 이름과 키워드 내용을 지정
            const keywordDto_prodkeywords = data.prodkeywords;
            const keywordDto_prodexplains = data.prodexplains;

            //해당 하는 키워드가 있을경우 느낌표 이미지를 표시
            var tooltip_img_El = document.createElement('img')
            tooltip_img_El.src = "/img/priority.png";
            product_tooltip_icon_El.appendChild(tooltip_img_El);

            keywordDto_prodkeywords.forEach((keydata, index) => {

                var tooltip_tep_El = document.createElement('div')
                tooltip_tep_El.className = "tooltip-tep";

                var tooltip_key_El = document.createElement('li')
                tooltip_key_El.textContent = keydata;
                tooltip_tep_El.className = "tooltip-key";


                var tooltip_text_El = document.createElement('span')
                tooltip_text_El.className = "tooltip-text";
                tooltip_text_El.textContent = keywordDto_prodexplains[index];



                tooltip_tep_El.appendChild(tooltip_key_El);
                tooltip_tep_El.appendChild(tooltip_text_El);
                product_tooltip_El.appendChild(tooltip_tep_El);

                product_tooltip_icon_El.appendChild(product_tooltip_El);

            });
        }



        //====================================================================

        //상품 아이템 설명
        var product_item_info_El = document.createElement('div');
        product_item_info_El.className = "product-item-info";
        product_item_info_El.textContent = data.prodcontext;

        //상품 아이템 테그
        var product_item_tag_El = document.createElement('div');
        product_item_tag_El.className = "product-item-tag";
        product_item_tag_El.textContent = data.prodtags;

        //상품 아이템 오른쪽
        var product_item_right_El = document.createElement('div');
        product_item_right_El.className = "product-item-right";

        //상품 아이템 날짜
        var product_item_ptime_El = document.createElement('div');
        product_item_ptime_El.className = "product-item-ptime";
        product_item_ptime_El.textContent = data.prodtime;

        //상품 아이템 가격
        var product_item_price_El = document.createElement('div');
        product_item_price_El.className = "product-item-price";
        product_item_price_El.textContent = priceConverter(data.prodprice) + "원";

        //상품 아이템 장바구니 이동
        var product_itme_into_cart_El = document.createElement('button');
        product_itme_into_cart_El.className = "product-itme-into-cart";
        product_itme_into_cart_El.textContent = "담기->";
        product_itme_into_cart_El.setAttribute('prod-code', data.prodcode);

        //상품 아이템 장바구니 제거
        var product_itme_out_cart_El = document.createElement('button');
        product_itme_out_cart_El.className = "product-itme-out-cart";
        product_itme_out_cart_El.textContent = "제거->";
        product_itme_out_cart_El.setAttribute('prod-code', data.prodcode);
        product_itme_out_cart_El.style.visibility = "hidden";


        //생성한 테그들을 서로 연결
        product_item_El.appendChild(product_item_left_El);
        product_item_El.appendChild(product_item_center_El);
        product_item_El.appendChild(product_item_right_El);

        product_item_left_El.appendChild(product_img_El);

        product_item_center_El.appendChild(product_item_title_El);

        product_item_title_El.appendChild(product_item_code_num_El);
        product_item_title_El.appendChild(product_item_name_El);
        product_item_title_El.appendChild(product_tooltip_icon_El);

        product_item_center_El.appendChild(product_item_info_El);
        product_item_center_El.appendChild(product_item_tag_El);

        product_item_right_El.appendChild(product_item_ptime_El);
        product_item_right_El.appendChild(product_item_price_El);
        product_item_right_El.appendChild(product_itme_into_cart_El);
        product_item_right_El.appendChild(product_itme_out_cart_El);

        list_area_El.appendChild(product_item_El);


    }

    //====================================================================
    //키워드 툴팁 마우스 호버 이벤트 생성
    //====================================================================
    const setTooltips = () => {

        const getTooltips = document.querySelectorAll('.product-tooltip-icon')

        getTooltips.forEach(tooltips => {

            if (tooltips.querySelector('.product-tooltip')) {

                const tooltip_item = tooltips.querySelector('.product-tooltip')

                tooltips.addEventListener('mouseover', function () {
                    tooltip_item.style.visibility = "visible";
                    tooltip_item.style.opacity = "1";
                })

                tooltips.addEventListener('mouseout', function () {
                    tooltip_item.style.visibility = "hidden";
                    tooltip_item.style.opacity = "0";
                })

            } else {
                tooltips.style.visibility = "hidden";
            }

        })

    };


    //====================================================================
    //상품목록 '담기'버튼 제어
    //====================================================================
    //상품목록에서 장바구니에 이미 있는 상품의 담기버튼 비활성화
    const hideproductbtn = () => {

        console.log("장바구니 담기버튼 제어")
        const product_item_right_El = document.querySelectorAll('.product-item-right');
        const cart_itme_out_El = document.querySelectorAll('.cart-itme-out');

        product_item_right_El.forEach((productitem, productindex) => {

            const productitem_into_cart_El = productitem.querySelector('.product-itme-into-cart');
            const productitem_out_cart_El = productitem.querySelector('.product-itme-out-cart');
            productitem_into_cart_El.style.visibility = 'visible';
            productitem_out_cart_El.style.visibility = 'hidden';

            cart_itme_out_El.forEach(cartitem => {

                if (productitem_into_cart_El.getAttribute('prod-code') == cartitem.getAttribute('prod-code')) {

                    productitem_into_cart_El.style.visibility = 'hidden';
                    productitem_out_cart_El.style.visibility = 'visible';

                }

            });


        });

    }

    //================================================================
    //장바구니에 목록 불러오기
    //================================================================
    const listcart = () => {

        if (username != "anonymousUser") {
            const user = { "username": username }
            axios.post('/product/cartlist', user, { headers: { 'Content-Type': 'application/json' } })
                .then(response => {
                    console.log(response);

                    if (response != null) {
                        const productData = response.data;

                        //장바구니 기존 목록 제거
                        const cprod_El = document.querySelectorAll('.cart-prod-list');
                        cprod_El.forEach(cprod => {
                            cprod.innerHTML = '';
                        })
                        //장바구니 목록 생성
                        productData.forEach(data => { CreateCartList(data) });

                        //장바구니 제거 등록
                        removecart();

                        // 상품목록 '담기' 버튼 숨기기
                        hideproductbtn();

                        //장바구니 상품 가격 합계 구하기
                        cartSumOfPrice();


                    }

                })
                .catch(error => console.log(error));


        }

    }

    //================================================================
    //장바구니에 상품 가격 함계 불러오기
    //================================================================
    const cartSumOfPrice = () => {

        const cart_price_sum_El = document.querySelector('.cart-price-sum')
        axios.post('/product/cartprice', {username: username})
        .then(response =>{

            console.log(response);
            if(response !== null){
                let getAllPrice = response.data;
                cart_price_sum_El.textContent = '합계 : '+priceConverter(getAllPrice)+'원'
            }else{
                cart_price_sum_El.textContent = '합계 : 0원'
            }

        })
        .catch(error => console.log(error))

    }

    //================================================================
    //장바구니에 목록 생성
    //================================================================
    const CreateCartList = (data) => {

        const viewProduct = (proddata) => {

            //장바구니 상품 아이템
            var cart_item_El = document.createElement('div');
            cart_item_El.className = "cart-item";

            //장바구니 상품 아이템 왼쪽
            var cart_item_left_El = document.createElement('div')
            cart_item_left_El.className = "cart-item-left";

            //장바구니 상품 이미지
            var cart_img_El = document.createElement('img')
            cart_img_El.className = "cart-img";
            cart_img_El.src = proddata.prodimagepaths[0];

            //장바구니 상품 아이템 상세내용
            var cart_item_content_El = document.createElement('div')
            cart_item_content_El.className = "cart-item-content";

            //장바구니 상품 아이템 타이틀 틀
            var cart_item_title_El = document.createElement('div')
            cart_item_title_El.className = "cart-item-title";

            //장바구니 상품 아이템 번호
            var cart_item_code_num_El = document.createElement('div')
            cart_item_code_num_El.className = "cart-item-code-num";
            cart_item_code_num_El.textContent = proddata.prodcode;

            //장바구니 상품 아이템 제목
            var cart_item_name_El = document.createElement('a')
            cart_item_name_El.className = "cart-item-name";
            cart_item_name_El.textContent = proddata.prodname;
            cart_item_name_El.href = "/product/get/" + proddata.prodcode;

            //장바구니 상품 아이템 가격
            var cart_item_price_El = document.createElement('div');
            cart_item_price_El.className = "cart-item-price";
            cart_item_price_El.textContent = priceConverter(proddata.prodprice) + "원";

            //장바구니 상품 아이템 제거
            var cart_itme_out_cart_El = document.createElement('button');
            cart_itme_out_cart_El.className = "cart-itme-out";
            cart_itme_out_cart_El.textContent = "제거";
            cart_itme_out_cart_El.setAttribute('prod-code', proddata.prodcode);

            //장바구니 상품 수량 표시
            var cart_quantity_El = document.createElement('div');
            cart_quantity_El.className = "cart-quantity";

            //장바구니 상품 수량
            var cart_quantity_count_El = document.createElement('div');
            cart_quantity_count_El.className = "cart-quantity_count";
            cart_quantity_count_El.setAttribute('cart-no', proddata.cartno);
            cart_quantity_count_El.textContent = '0';

            //장바구니 상품 수량 증가
            var cart_quantity_up_El = document.createElement('button');
            cart_quantity_up_El.className = "cart-quantity-up";
            cart_quantity_up_El.textContent = '>';

            //장바구니 상품 수량 감소
            var cart_quantity_down_El = document.createElement('button');
            cart_quantity_down_El.className = "cart-quantity-down";
            cart_quantity_down_El.textContent = '<';

            cart_item_El.appendChild(cart_item_left_El);
            cart_item_El.appendChild(cart_item_content_El);

            cart_item_left_El.appendChild(cart_img_El);

            cart_item_content_El.appendChild(cart_item_title_El);
            cart_item_content_El.appendChild(cart_item_price_El);

            cart_item_title_El.appendChild(cart_item_code_num_El);
            cart_item_title_El.appendChild(cart_item_name_El);

            cart_item_content_El.appendChild(cart_itme_out_cart_El);
            cart_item_content_El.appendChild(cart_quantity_El);

            cart_quantity_El.appendChild(cart_quantity_down_El);
            cart_quantity_El.appendChild(cart_quantity_count_El);
            cart_quantity_El.appendChild(cart_quantity_up_El);



            return cart_item_El;
        }

        const cprod_El = document.querySelectorAll('.cart-prod-list');
        cprod_El.forEach((cprod, index) => {
            //index 0 = cpu | 1 = motherboard | 2 = memory | 3 = gpu | 4 = ssd | 5 = hdd | 6 = case | 7 = power |

            if (data.prodtype == "cpu" && index == 0) {
                console.log("type cpu");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "motherboard" && index == 1) {
                console.log("type motherboard");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "memory" && index == 2) {
                console.log("type memory");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "gpu" && index == 3) {
                console.log("type gpu");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "ssd" && index == 4) {
                console.log("type ssd");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "hdd" && index == 5) {
                console.log("type hdd");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "case" && index == 6) {
                console.log("type case");
                cprod.appendChild(viewProduct(data));

            } else if (data.prodtype == "power" && index == 7) {
                console.log("type power");
                cprod.appendChild(viewProduct(data));

            }


        })



    }



    //================================================================
    //장바구니에 상품 추가
    //================================================================
    const intocart = () => {

        intocartbtn_El = document.querySelectorAll('.product-itme-into-cart');
        intocartbtn_El.forEach((item) => {

            // 이벤트 리스너가 이미 추가되었는지 확인
            if (!item.hasEventListener) {

                item.addEventListener('click', function () {

                    if (username != "anonymousUser") {

                        let pcode = item.getAttribute('prod-code');

                        const intodata = { "prodcode": pcode, "username": username }

                        axios.post("/product/intocart", intodata, { headers: { 'Content-Type': 'application/json' } })
                            .then(response => {

                                // 장바구니 재호출
                                listcart();

                            })
                            .catch(error => console.log(error));

                    } else {
                        alert("로그인 해주세요!")
                    }


                });

            } item.hasEventListener = true;

        });

    }

    //================================================================
    //장바구니에 상품 제거
    //================================================================
    const removecart = () => {

        const removeitem = (item) => {

            if (username != "anonymousUser") {

                let pcode = item.getAttribute('prod-code');

                const outdata = { "prodcode": pcode, "username": username }

                axios.post("/product/removecart", outdata, { headers: { 'Content-Type': 'application/json' } })
                    .then(response => {

                        // 장바구니 재호출
                        listcart();

                    })
                    .catch(error => console.log(error));

            } else {
                alert("로그인 해주세요!")
            }

        }

        const product_itme_out_cart_El = document.querySelectorAll('.product-itme-out-cart');
        const cart_itme_out_El = document.querySelectorAll('.cart-itme-out');

        //장바구니 에서 '제거' 클릭
        cart_itme_out_El.forEach(item => {

            // 이벤트 리스너가 이미 추가되었는지 확인
            if (!item.hasEventListener) {
                item.addEventListener('click', function () {

                    removeitem(item);

                });
            }

            item.hasEventListener = true;

        });

        //상품목록 에서 '제거' 클릭
        product_itme_out_cart_El.forEach(item => {

            // 이벤트 리스너가 이미 추가되었는지 확인
            if (!item.hasEventListener) {
                item.addEventListener('click', function () {

                    removeitem(item);

                });
            }

            item.hasEventListener = true;

        });

    }

    //====================================================================
    //상품검색 옵션 테그필터
    //====================================================================
    const setSearchFilterListener = () => {

        //생성된 모든 체크 박스를 찾는다
        const prodtags_checkbox_El = document.querySelectorAll('.prodtags-checkbox');
        prodtags_checkbox_El.forEach(item => {
            //이벤트 리스너가 이미 등록돘는지 확인
            if (!item.hasEventListener) {
                //체크 박스 변경시
                item.addEventListener('change', function () {
                    //체크 박스가 체크되면
                    if (item.checked) {
                        //리스트 필터에 해당 체크박스이 값을 추가한다.
                        listPordtagsFliter.push(item.value)
                        //상품 리스트 불러오기
                        getProdList();

                        //체크 박스를 체크 헤제하면
                    } else {
                        //헤제된 체크박스의 값을 받는다.
                        const valueToRemove = item.value;

                        //받은 체크박스의 값과 동일한 값을 제거한 새로운 배열을 콜백함수로 내보낸다.
                        listPordtagsFliter = listPordtagsFliter.filter(function (item) {
                            return item !== valueToRemove;
                        });
                        //상품 리스트 불러오기
                        getProdList();

                    }


                });

            } item.hasEventListener = true;

        })

    }

    //====================================================================
    //상품검색 옵션 검색어
    //====================================================================

    const setSearchSubmitListener = () => {

        const search_product_input_El = document.querySelector('.search-product-input');
        const search_product_submit_El = document.querySelector('.search-product-submit')

        //입력값이 변경되면 변경사항을 저장
        search_product_input_El.addEventListener('change', function () {

            listProdSearchWord = document.querySelector('.search-product-input').value;

        })

        //검색 시작 (버튼)
        search_product_submit_El.addEventListener('click', function () {

            listProdSearchWord = document.querySelector('.search-product-input').value;
            //상품 리스트 불러오기
            getProdList();

        })

    }
    //검색 시작 (엔터)
    const startSubmit = (event) => {

        if (event.keyCode === 13) {

            listProdSearchWord = document.querySelector('.search-product-input').value;
            //상품 리스트 불러오기
            getProdList();

        }

    }



    //====================================================================
    //상품 리스트 필터 옵션 생성
    //====================================================================
    citem_type_all_El.forEach((item, index) => {
        item.addEventListener('click', function () {

            //장바구니 리스트 찾기
            const cprod_El = document.querySelectorAll('.cart-prod-list');

            //기존 옵션 제거
            product_search_option_box_el.innerHTML = '';
            //기존 필터 제거
            listFliterKeywords = [];

            //옵션 생성
            if (item.classList.contains('citem-cpu')) {
                var cpu_El = document.createElement('div');
                cpu_El.className = 'search-option-top';
                cpu_El.textContent = 'CPU';

                var cpu_option_El = document.createElement('div');
                cpu_option_El.className = 'search-option-list';

                genTags(tag_cpu, cpu_option_El);

                product_search_option_box_el.appendChild(cpu_El);
                product_search_option_box_el.appendChild(cpu_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'cpu';

            } else if (item.classList.contains('citem-motherboard')) {
                var motherboard_El = document.createElement('div');
                motherboard_El.className = 'search-option-top';
                motherboard_El.textContent = '메인보드';


                var motherboard_option_El = document.createElement('div');
                motherboard_option_El.className = 'search-option-list';

                genTags(tag_motherboard, motherboard_option_El);

                product_search_option_box_el.appendChild(motherboard_El);
                product_search_option_box_el.appendChild(motherboard_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'motherboard';

            } else if (item.classList.contains('citem-memory')) {
                var memory_El = document.createElement('div');
                memory_El.className = 'search-option-top';
                memory_El.textContent = '메모리';

                var memory_option_El = document.createElement('div');
                memory_option_El.className = 'search-option-list';

                genTags(tag_memory, memory_option_El);

                product_search_option_box_el.appendChild(memory_El);
                product_search_option_box_el.appendChild(memory_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'memory';

            } else if (item.classList.contains('citem-gpu')) {
                var gpu_El = document.createElement('div');
                gpu_El.className = 'search-option-top';
                gpu_El.textContent = '그래픽카드';

                var gpu_option_El = document.createElement('div');
                gpu_option_El.className = 'search-option-list';

                genTags(tag_gpu, gpu_option_El);

                product_search_option_box_el.appendChild(gpu_El);
                product_search_option_box_el.appendChild(gpu_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'gpu';

            } else if (item.classList.contains('citem-ssd')) {
                var ssd_El = document.createElement('div');
                ssd_El.className = 'search-option-top';
                ssd_El.textContent = 'SSD';

                var ssd_option_El = document.createElement('div');
                ssd_option_El.className = 'search-option-list';

                genTags(tag_ssd, ssd_option_El);

                product_search_option_box_el.appendChild(ssd_El);
                product_search_option_box_el.appendChild(ssd_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'ssd';

            } else if (item.classList.contains('citem-hdd')) {
                var hdd_El = document.createElement('div');
                hdd_El.className = 'search-option-top';
                hdd_El.textContent = 'HDD';

                var hdd_option_El = document.createElement('div');
                hdd_option_El.className = 'search-option-list';

                genTags(tag_hdd, hdd_option_El);

                product_search_option_box_el.appendChild(hdd_El);
                product_search_option_box_el.appendChild(hdd_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'hdd';

            } else if (item.classList.contains('citem-case')) {
                var case_El = document.createElement('div');
                case_El.className = 'search-option-top';
                case_El.textContent = '케이스';

                var case_option_El = document.createElement('div');
                case_option_El.className = 'search-option-list';

                genTags(tag_case, case_option_El);

                product_search_option_box_el.appendChild(case_El);
                product_search_option_box_el.appendChild(case_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'case';

            } else if (item.classList.contains('citem-power')) {
                var power_El = document.createElement('div');
                power_El.className = 'search-option-top';
                power_El.textContent = '파워';

                var power_option_El = document.createElement('div');
                power_option_El.className = 'search-option-list';

                genTags(tag_power, power_option_El);

                product_search_option_box_el.appendChild(power_El);
                product_search_option_box_el.appendChild(power_option_El);

                //리스트를 불러올 상품타입 변경
                listProdType = 'power';

            } else {

            }


            //체크박스 이벤트 리스너
            setSearchFilterListener();

            //상품목록 다시 불러오기
            getProdList();


            //모든 항목의 색을 디폴트로 변경
            citem_type_all_El.forEach((item) => {
                item.style.backgroundColor = 'white';
                item.style.color = '#333';
            })
            cprod_El.forEach(cprod => {
                cprod.style.border = ''
            })
            //클릭한 항목의 색을 변경
            item.style.backgroundColor = '#E53B38';
            item.style.color = 'white';
            cprod_El.forEach((cprod, prodindex) => {
                if (prodindex == index) {
                    cprod.style.border = '1px solid #E53B38';
                }
            })
        })
    })





    const setSwiperContent = () => {

        const swiper_wrapper_El = document.querySelector('.swiper-wrapper');
        let indexNum = 0;

        swiperitem.forEach((item, index) => {

            if (index === 0) {
                //0번 인덱스는 버림

            } else if (index % 2 === 0 && !(index === 0)) {
                //링크 경로 (짝수번)
                const swiper_item_El = document.querySelectorAll('.swiper-slide')
                swiper_item_El.forEach((swiperitem) => {

                    if (swiperitem.getAttribute('index') == indexNum) {
                        //console.log('스와이퍼에 링크 삽입'+swiperitem.getAttribute('index')+'to'+indexNum);
                        swiperitem.href = item;
                    }

                })

            } else {
                //이미지 경로 (홀수번)
                var swiper_item_El = document.createElement('a');
                swiper_item_El.className = 'swiper-slide';
                swiper_item_El.setAttribute('index', index)

                var swiper_item_img_El = document.createElement('img');
                swiper_item_img_El.className = 'swiper-img';
                swiper_item_img_El.src = item;

                swiper_item_El.appendChild(swiper_item_img_El);
                swiper_wrapper_El.appendChild(swiper_item_El);
                indexNum = index;

            }

        });


        //====================================================================
        // 스와이퍼 설정
        //====================================================================
        const swiper = new Swiper('.swiper', {
            // Optional parameters
            direction: 'horizontal',
            loop: true,

            autoplay: {
                delay: 3000,
            },

            // 보여지는 슬라이드 개수
            slidesPerView: 5,

            // 한 번에 움직일 슬라이드 개수
            slidesPerGroup: 1,

            // 적응형(swipe to fill) 모드 비활성화하면 지정된 slidesPerView대로만 표시됩니다.
            spaceBetween: 10, // 옵션: 슬라이드 사이 간격(픽셀)

            // If we need pagination
            // pagination: {
            //     el: '.swiper-pagination',
            // },
            // And if we need scrollbar
            scrollbar: {
                el: '.swiper-scrollbar',
            },

        });

    }

    //장바구니텝 부드럽게 이동 테스트
    // window.addEventListener('scroll', function () {
    //     const cartBox_El = document.querySelector('.cart-box');
    //     const cartArea_El = document.querySelector('.cart-area');
    //     const scrollTop = cartArea_El.scrollY;
    //     const someThreshold = 10;

    //     if (scrollTop >= someThreshold) { // someThreshold는 원하는 스티키 행동을 시작할 Y 위치입니다.
    //         cartBox_El.style.transform = 'translateY(' + (scrollTop - someThreshold) + 'px)';
    //     } else {
    //         cartBox_El.style.transform = 'translateY(0px)';
    //     }
    // });

    //메인페이지 로드시 실행할 디폴트 설정들 실행
    initfunc();



</script>



</body>

</html>